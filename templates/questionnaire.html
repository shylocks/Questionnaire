<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>{{ Questionnaire.title }}</title>
    <script src="/static/js/jquery-3.2.1.min.js" type="text/javascript"></script>
    <script src="/static/js/jquery.cookie.js" type="text/javascript"></script>
    <script src="/static/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/static/js/jquery.bootstrap.js" type="text/javascript"></script>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons"/>
    <link href="/static/css/font-awesome-pro.css" rel="stylesheet">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="/static/css/material-bootstrap-wizard.css" rel="stylesheet"/>
    <script src="/static/js/material-bootstrap-wizard.js"></script>
    <script src="/static/js/jquery.validate.min.js"></script>
</head>
<body>
<!--   Big container   -->
<div class="container">
    <div class="row">
        <div class="col-sm-8 col-sm-offset-2">
            <!--      Wizard container        -->
            <div class="wizard-container">
                <div class="card wizard-card" data-color="purple" id="wizard">
                    <form action="" method="">
                        <div class="wizard-header">

                            <h3 class="wizard-title">
                                <a href="/ques/"><i class="far fa-long-arrow-left" style="color: #00bcd4;"></i></a>
                                    {{ Questionnaire.title }}
                            </h3>
                            <!--<h5>这是一个问卷描述预留<a data-toggle="modal" data-target="#myModal"><img
                                    src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTguMS4xLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiPgo8Zz4KCTxwYXRoIGlkPSJwZW4iIGQ9Ik0yOS4zOTUsMi41OEMyNy43NSwwLjkzNywyNS41ODQsMCwyMy40NDksMGMtMS44MDEsMC0zLjQ1OSwwLjY2OC00LjY3LDEuODc3bC00Ljg2Nyw0LjkwNCAgIGMtMC4wMTUsMC4wMTQtMC4wMzIsMC4wMjMtMC4wNDcsMC4wMzhjLTAuMDA4LDAuMDA4LTAuMDEzLDAuMDE5LTAuMDIxLDAuMDI2bDAuMDAyLDAuMDAyTDMuNTE3LDE3LjI1NiAgIGMtMC40NzYsMC40NzMtMC44MjEsMS4wNjItMS4wMTMsMS43MDVsLTIuMzQ5LDguNTA4QzAuMTUzLDI3LjQ5MiwwLDI4LjE2LDAsMjguNUMwLDMwLjQzMiwxLjU2OSwzMiwzLjUwNCwzMiAgIGMwLjM4NSwwLDEuMTMtMC4xODQsMS4xNTctMC4xODhsOC40NzgtMi4yMjljMC42NDQtMC4xOTEsMS4yMjktMC41MzksMS43MDUtMS4wMTZsMTUuMjYzLTE1LjM4MyAgIEMzMi44ODMsMTAuNDA2LDMyLjU3LDUuNzUsMjkuMzk1LDIuNTh6IE0xNi4wMTQsMjMuNzk1Yy0wLjA4Mi0wLjkwMi0wLjMzNy0xLjc4Ny0wLjcxOS0yLjYyN2w5LjQ1NS05LjQ1NCAgIGMwLjU3OCwxLjgyNiwwLjI4MSwzLjczNi0wLjk4Niw1LjAwNGMtMC4wMDgsMC4wMDgtMC4wMTgsMC4wMTMtMC4wMjUsMC4wMjFsMC4wMTQsMC4wMTNsLTcuNzI4LDcuNzkgICBDMTYuMDI1LDI0LjI5MywxNi4wMzcsMjQuMDQ5LDE2LjAxNCwyMy43OTV6IE0xNC43OTMsMjAuMjU2Yy0wLjM3My0wLjYxMy0wLjc5Ny0xLjIwNS0xLjMyMi0xLjcyOSAgIGMtMC42MTEtMC42MTEtMS4zMTItMS4wOS0yLjA0NC0xLjQ5Mmw5LjUzMi05LjUzMmMwLjc0OCwwLjMzMiwxLjQ2NSwwLjgwNSwyLjA5OCwxLjQzOGMwLjU0MSwwLjUzOSwwLjk1OSwxLjE0MywxLjI4MSwxLjc3MSAgIEwxNC43OTMsMjAuMjU2eiBNMTAuNDg2LDE2LjU2MmMtMC45MjYtMC4zNzMtMS44OTYtMC41ODYtMi44NjgtMC41OTlsNy43MDMtNy43NjJjMS4xNzktMS4xNSwyLjg5Ni0xLjQ4MSw0LjU4Ny0xLjA2MiAgIEwxMC40ODYsMTYuNTYyeiBNNC4xNjcsMjkuODczQzQuMDU4LDI5Ljg5OCwzLjcxOSwyOS45ODQsMy40ODksMzBDMi42NjcsMjkuOTksMiwyOS4zMjIsMiwyOC41ICAgYzAuMDEyLTAuMTY4LDAuMDc5LTAuNDU3LDAuMTAyLTAuNTYybDEuMDUzLTMuODE0YzEuMTQzLTAuMDMxLDIuMzczLDAuNDE0LDMuMzQsMS4zODNjMC45ODIsMC45OCwxLjQ0NCwyLjIzNCwxLjM5NCwzLjM5MSAgIEw0LjE2NywyOS44NzN6IE04Ljg3NCwyOC42MzdjLTAuMDI0LTEuMzQyLTAuNTctMi43MzgtMS42NzItMy44MzhDNi4xNiwyMy43NTYsNC43OTYsMjMuMTU0LDMuNDM2LDIzLjFsMC45OTYtMy42MDcgICBjMC4wNzItMC4yNCwwLjIxNS0wLjQ3NywwLjM5MS0wLjY4NGMyLjAwNi0xLjQzNiw1LjA5MS0xLjAxMiw3LjIzNCwxLjEzM2MyLjI2NywyLjI2NiwyLjYxNyw1LjU4NiwwLjg3MSw3LjU2OCAgIGMtMC4xMTYsMC4wNjEtMC4yMzMsMC4xMTktMC4zNTksMC4xNTZMOC44NzQsMjguNjM3eiBNMjguNjkxLDExLjc3MmwtMS42ODQsMS42OTdjMC0wLjIyNiwwLjAyNy0wLjQ0MywwLjAwNi0wLjY3NCAgIGMtMC4xNzYtMS45MzUtMS4wNzgtMy44MDYtMi41NDMtNS4yNjljLTEuNjI5LTEuNjMtMy43ODktMi41NjUtNS45MjgtMi41NzFsMS42NTYtMS42N0MyMS4wMjcsMi40NTgsMjIuMTg0LDIsMjMuNDQ5LDIgICBjMS42MDksMCwzLjI2MiwwLjcyOCw0LjUzMywxLjk5NWMxLjE5MywxLjE5MSwxLjkwNCwyLjY3MSwyLjAwNiw0LjE2OEMzMC4wODIsOS41NiwyOS42MjEsMTAuODQxLDI4LjY5MSwxMS43NzJ6IiBmaWxsPSIjMDBiY2Q0Ii8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg=="/></a>
                            </h5>-->
                        </div>
                        <div class="wizard-navigation">
                            <ul>
                                {% for i in parts %}
                                    <li><a href="#Part{{ i }}" data-toggle="tab">第{{ i }}部分</a></li>
                                {% endfor %}
                                <!--增加部分<li><a class="AddPart">
                                    <img src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQyIDQyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MiA0MjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiPgo8cG9seWdvbiBwb2ludHM9IjQyLDE5IDIzLDE5IDIzLDAgMTksMCAxOSwxOSAwLDE5IDAsMjMgMTksMjMgMTksNDIgMjMsNDIgMjMsMjMgNDIsMjMgIiBmaWxsPSIjOTFEQzVBIi8+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=" /></a></li>
                                -->
                            </ul>
                        </div>
                        <!--增加部分
                        <script>
                            $(".AddPart").click(function () {
                                alert(1);
                                var w=$(".wizard-navigation");
                                var a=w.find("a[class=AddPart]");
                                var len=w.find("li").length;
                                a.parent().before('<li><a href="#Part'+len+'" data-toggle="tab">第'+len+'部分</a></li>');
                                $(".tab-content").append('<div class="tab-pane" id="Part'+len+'">'+'</div');
                            })
                        </script>
                        -->
                        <div class="tab-content">
                            {% for i in parts %}
                                <div class="tab-pane" id="Part{{ i }}">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <h4 class="info-text">
                                                {% for part in part_list %}
                                                    {% ifequal part.questionnaire.id qid %}
                                                        {% ifequal part.part_id i %}
                                                            {{ part.description }}
                                                            <a data-toggle="modal" data-target="#PartModal"
                                                               onclick="showPartModal{{ i }}()"><i class="fal fa-edit"></i></a>

                                                            <script>
                                                                var showPartModal{{ i }} = function () {
                                                                    $("#MyModalBody").load("/questionnaire/{{ qid }}/?method=viewPart&PartID={{ part.part_id }} ", function () {
                                                                        $("#MyModalBody").modal('show');
                                                                    })
                                                                }
                                                            </script>
                                                        {% endifequal %}
                                                    {% endifequal %}
                                                {% endfor %}
                                            </h4>
                                        </div>
                                        {% for question in question_list %}
                                            {% ifequal question.part_id  i %}
                                                <div class="col-sm-5 col-sm-offset-1">
                                                    <div class="form-group label-floating">
                                                        {% if question.picture %}
                                                             <img class="img-thumbnail" src="{{ question.picture }}"/>
                                                        {% endif %}
                                                        <label class="control-label">{{ question.caption }}</label>
                                                        <select name="select_answer" class="form-control">
                                                            <option disabled="" selected=""></option>
                                                            {% for option in option_list %}
                                                                {% ifequal option.question_id question.id %}
                                                                    <option value="{{ option.id }}"> {{ option.name }}</option>
                                                                {% endifequal %}
                                                            {% endfor %}
                                                        </select>
                                                        <a data-toggle="modal" data-target="#QuestionModal"
                                                           onclick="showModal{{ question.id }}()">
                                                            <i class="fal fa-pen-square fa-lg"></i></a>
                                                        <a href="/questionnaire/{{ Questionnaire.id }}/?method=delete&QuestionID={{ question.id }}">
                                                            <i class="fal fa-trash-alt fa-lg"></i></a>
                                                        <script>
                                                            var showModal{{ question.id }} = function () {
                                                                $("#MyModalBody").load("/question?method=view&QuestionnaireID={{ questionnaire_id }}&QuestionID={{ question.id }} ", function () {
                                                                    $("#MyModalBody").modal('show');
                                                                })
                                                            }
                                                        </script>
                                                    </div>
                                                </div>
                                            {% endifequal %}
                                        {% endfor %}
                                        <div class="col-sm-5 col-sm-offset-1">
                                            <a data-toggle="modal" data-target="#AddModal"
                                               onclick="showAddModal{{ i }}()">
                                                <i class="fal fa-plus-octagon fa-2x"></i>
                                            </a>
                                            <script>
                                                var showAddModal{{ i }} = function () {
                                                    $("#MyModalBody").load("/question/?method=add&PartID={{ i }}&QuestionnaireID={{ questionnaire_id }} ", function () {
                                                        $("#MyModalBody").modal('show');
                                                    })
                                                }
                                            </script>
                                        </div>
                                </div>
                                    </div>

                            {% endfor %}

                        </div>
                        <div class="wizard-footer">
                            <div class="pull-right">
                                <input type='button' class='btn btn-next btn-fill btn-primary btn-wd' name='next'
                                       value='下一部分'/>
                                <!--
                                <input type='button' class='btn btn-finish btn-fill btn-primary btn-wd' name='finish'
                                       value='提交问卷'/>
                                       -->
                            </div>

                            <div class="pull-left">
                                <input type='button' class='btn btn-previous btn-fill btn-default btn-wd'
                                       name='previous' value='上一部分'/>
                            </div>
                            <div class="clearfix"></div>
                        </div>

                    </form>
                    <div class="modal fade" id="MyModalBody" tabindex="-1" role="dialog" aria-labelledby="MyModalLabel"
                         aria-hidden="true">
                    </div>
                </div>
            </div> <!-- wizard container -->
        </div>
    </div> <!-- row -->
</div> <!--  big container -->
</body>
</html>